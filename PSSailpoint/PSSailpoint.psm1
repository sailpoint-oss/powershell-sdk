#
# IdentityNow V3 API
# Use these APIs to interact with the IdentityNow platform to achieve repeatable, automated processes with greater scalability. We encourage you to join the SailPoint Developer Community forum at https://developer.sailpoint.com/discuss to connect with other developers using our APIs.
# Version: 3.0.0
# Generated by OpenAPI Generator: https://openapi-generator.tech
#

#region Import functions

# define the following classes in PowerShell
# try {
#     Add-Type -AssemblyName System.Web -ErrorAction Ignore | Out-Null
#     Add-Type -AssemblyName System.Net -ErrorAction Ignore | Out-Null
# }
# catch {
#     Write-Verbose $_
# }

# set $ErrorActionPreference to 'Stop' globally
$ErrorActionPreference = 'Stop'

# store the API client's configuration
$Script:Configuration = [System.Collections.HashTable]@{}

$Script:CmdletBindingParameters = @('Verbose', 'Debug', 'ErrorAction', 'WarningAction', 'InformationAction', 'ErrorVariable', 'WarningVariable', 'InformationVariable', 'OutVariable', 'OutBuffer', 'PipelineVariable')

. $PSScriptRoot\Configuration.ps1
. $PSScriptRoot\Pagination.ps1

# Import nested version modules
$NestedModules = @(
    "$PSScriptRoot\beta\src\PSSailpoint.Beta\PSSailpoint.Beta.psd1",
    "$PSScriptRoot\v3\src\PSSailpoint.V3\PSSailpoint.V3.psd1",
    "$PSScriptRoot\v2024\src\PSSailpoint.V2024\PSSailpoint.V2024.psd1",
    "$PSScriptRoot\v2025\src\PSSailpoint.V2025\PSSailpoint.V2025.psd1",
    "$PSScriptRoot\v2026\src\PSSailpoint.V2026\PSSailpoint.V2026.psd1"
)

foreach ($ModulePath in $NestedModules) {
    if (Test-Path $ModulePath) {
        try {
            Import-Module $ModulePath -Force -Global -ErrorAction Stop
            Write-Verbose "Successfully imported: $ModulePath"
        }
        catch {
            Write-Warning "Failed to import $ModulePath : $_"
        }
    }
    else {
        Write-Verbose "Module not found: $ModulePath"
    }
}

# Import any additional function files from root
$FunctionFiles = Get-ChildItem -Path $PSScriptRoot\*.ps1 -ErrorAction SilentlyContinue |
    Where-Object { $_.DirectoryName -eq $PSScriptRoot }

foreach ($File in $FunctionFiles) {
    try {
        . $File.FullName
        Write-Verbose "Dot-sourced: $($File.Name)"
    }
    catch {
        Write-Error "Failed to import $($File.Name): $_"
    }
}

#endregion
